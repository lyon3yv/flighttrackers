<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üì∞ Noticias de Aviaci√≥n - FlightTrackers</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <meta name="description" content="√öltimas noticias de aviaci√≥n actualizadas autom√°ticamente. Comunidad de spotters.">
</head>
<body>
  <!-- INTRO ANIMADA -->
  <div id="intro">
    <div id="cielo">
      <div id="avion"></div>
      <div id="tierra"></div>
    </div>
    <div class="logo">FlightTrackers</div>
  </div>

  <!-- NAVBAR -->
  <nav id="navbar">
    <div class="nav-container">
      <div class="nav-logo">FlightTrackers ‚úàÔ∏è</div>
      <ul class="nav-menu">
        <li><a href="index.html">Inicio</a></li>
        <li><a href="#about">Nosotros</a></li>
        <li><a href="#join">√önete</a></li>
        <li><a href="gallery.html">Galer√≠a</a></li>
        <li><a href="#news">üì∞ Noticias</a></li>
      </ul>
      <div class="hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </div>
    </div>
  </nav>

  <!-- MEN√ö LATERAL M√ìVIL -->
  <div class="mobile-menu" id="mobileMenu">
    <a href="index.html">Inicio</a>
    <a href="#about">Nosotros</a>
    <a href="#join">√önete</a>
    <a href="gallery.html">Galer√≠a</a>
    <a href="#news">üì∞ Noticias</a>
  </div>

  <!-- HERO NOTICIAS -->
  <header id="news-hero" class="section">
    <div class="news-hero-content">
      <div class="news-hero-text">
        <h1> √öltimas Noticias de Aviaci√≥n</h1>
        <p class="news-subtitle">Mantente al d√≠a con las novedades del mundo de la aviaci√≥n. Actualizado autom√°ticamente.</p>
        <div class="news-stats">
          <div class="stat-card">
            <div class="stat-icon">üì∞</div>
            <div class="stat-info">
              <div id="news-count" class="stat-number">0</div>
              <div class="stat-label">Noticias hoy</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>



  <!-- GRID DE NOTICIAS -->
  <section id="news-section" class="section">
    <div class="container">
      <div id="newsGrid" class="news-grid"></div>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 FlightTrackers ‚Äî Unidos por el cielo ‚úàÔ∏è</p>
  </footer>

  <script src="script.js"></script>

  <script>
    const WORKER_URL = "https://still-cloud-1375.developercontactmee.workers.dev/";
    const grid = document.getElementById("newsGrid");
    const newsCountEl = document.getElementById("news-count");

    async function loadNews() {
      grid.innerHTML = "";

      try {
        const res = await fetch(`${WORKER_URL}/?limit=20`);
        if (!res.ok) throw new Error("Error al obtener noticias");
        const data = await res.json();
        const allNews = data.items || [];
        newsCountEl.textContent = data.count || 0;

        if (!allNews.length) {
          grid.innerHTML = `<div class="no-news">No hay noticias recientes por ahora.</div>`;
          return;
        }

        for (const item of allNews) {
          const card = document.createElement("article");
          card.className = "news-card";

          const imgHtml = item.image ? `<img src="${item.image}" alt="" loading="lazy" class="news-image">` : '';

          const categoryTag = categorizeNews(item) ? `<span class="news-category">${categorizeNews(item)}</span>` : '';

          card.innerHTML = `
            ${imgHtml}
            <div class="news-content">
              <div class="news-header">
                <h3 class="news-title"><a href="${item.link}" target="_blank" rel="noopener">${item.title || "Ver noticia"}</a></h3>
                ${categoryTag}
              </div>
              <div class="news-meta">${[item.source, timeAgo(item.pubDate)].filter(Boolean).join(" ‚Ä¢ ")}</div>
              <p class="news-desc">${item.description || ""}</p>
              <a href="${item.link}" target="_blank" rel="noopener" class="news-cta">Leer m√°s ‚Üó</a>
            </div>
          `;

          grid.appendChild(card);
        }
      } catch (err) {
        console.error(err);
        grid.innerHTML = `<div class="no-news">No se pudieron cargar las noticias. Intenta m√°s tarde.</div>`;
      }
    }

    function categorizeNews(item) {
      const title = item.title.toLowerCase();
      const desc = item.description.toLowerCase();
      if (title.includes('militar') || desc.includes('militar') || title.includes('f-') || desc.includes('f-')) return 'Militar';
      if (title.includes('comercial') || desc.includes('comercial') || title.includes('airlines') || desc.includes('airlines')) return 'Comercial';
      return 'General';
    }

    function timeAgo(iso) {
      try {
        const t = new Date(iso).getTime();
        const diff = Date.now() - t;
        const mins = Math.round(diff / 60000);
        if (mins < 60) return `hace ${mins} min`;
        const hrs = Math.round(mins / 60);
        if (hrs < 24) return `hace ${hrs} h`;
        const days = Math.round(hrs / 24);
        return `hace ${days} d`;
      } catch {
        return "";
      }
    }

    loadNews();
  </script>
</body>
</html>
</body>
</html>
